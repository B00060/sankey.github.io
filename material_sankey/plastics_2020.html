<!DOCTYPE html>

<html lang="zh-tw" xmlns="http://www.w3.org/1999/xhtml">
<head>
  <!-- Plotly.js -->
  <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
  <link rel="stylesheet" href="https://code.jquery.com/ui/1.13.1/themes/base/jquery-ui.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
  <link rel="stylesheet" href="style.css">
  <link rel="stylesheet" href="https://unpkg.com/swiper/swiper-bundle.min.css">
  <script src="https://code.jquery.com/jquery-3.6.0.js"></script>
  <script src="https://unpkg.com/swiper/swiper-bundle.min.js"></script>
  <script src="https://code.jquery.com/ui/1.13.1/jquery-ui.js"></script>
</head>

<body>
  <header>
    <div class="logo-image">
        <div>
            <picture><source type="image/webp" srcset="https://793b5686c3.cbaul-cdnwnd.com/b03c2e59d8a11e2981158b740c9beb7b/200000021-8102381026/450/itri_CEL_A.webp?ph=793b5686c3 450w, https://793b5686c3.cbaul-cdnwnd.com/b03c2e59d8a11e2981158b740c9beb7b/200000021-8102381026/700/itri_CEL_A.webp?ph=793b5686c3 700w, https://793b5686c3.cbaul-cdnwnd.com/b03c2e59d8a11e2981158b740c9beb7b/200000021-8102381026/itri_CEL_A.webp?ph=793b5686c3 721w" sizes="(min-width: 600px) 450px, (min-width: 360px) calc(100vw * 0.8), 100vw" ><img src="https://793b5686c3.cbaul-cdnwnd.com/b03c2e59d8a11e2981158b740c9beb7b/200000020-60a5860a5b/itri_CEL_A.png?ph=793b5686c3" alt="" width="240" height="56" class="wnd-logo-img" ></picture>
        </div>
    </div>
    <h1>主題分析</h1>
    <nav>
        <ul>
            <li><!--<a href="https://hws-site.webnode.tw/">-->回首頁</a></li>
            <li><a href="https://www.reca.gov.tw/">循環署網</a></li>
            <li><a href="https://smmdb.moenv.gov.tw/SMM/WebPage/MF_index.aspx#section2">指標頁面</a></li>
            <li><a href="https://smmdb.moenv.gov.tw/SMM/WebPage/enter.aspx">分析系統</a></li>
        </ul>
    </nav>
</header>

<main>
<div class="background-bar">
    <div class="text">
        <h2><i class="fa-solid fa-puzzle-piece"></i> 主題: 塑膠物質流布</h2>
        <h3><i class="fab fa-unity"></i> 單位: 萬公噸</h3>
    </div>
    <div class="button-container">
        <a href="https://b00060.github.io/sankey.github.io/plotly/circular_economy_2022.html" style="text-decoration: none;">
        <div class="button" >
            <img src="img/all.png" alt="總體物質流"> 總體物質流
        </div>
        <a style="text-decoration: none;">
        <div class="button" id="now-button">
            <img src="img/plastics.png" alt="塑膠"> 塑膠
        </div>
        </a>
        <a href="https://b00060.github.io/sankey.github.io/material_sankey/minprogress.html" style="text-decoration: none;">
          <div class="button">
              <img src="img/steel-beam.png" alt="金屬"> 金屬
          </div>
          </a>
          <a href="https://b00060.github.io/sankey.github.io/material_sankey/binprogress.html" style="text-decoration: none;">
          <div class="button">
              <img src="img/biomass-energy.png" alt="生物質"> 生物質
          </div>
          </a>
          <a href="https://b00060.github.io/sankey.github.io/material_sankey/oinprogress.html" style="text-decoration: none;">
          <div class="button">
              <img src="img/sand.png" alt="無機資源"> 無機資源
          </div>
          </a>
    </div>
</div>

  <div class="dropdown">
    <button onclick="myFunction()" class="dropbtn">年度</button>
    <div id="myDropdown" class="dropdown-content">
      <a href="plastics_2022.html">2022</a>
      <a href="plastics_2021.html">2021</a>
      <a href="plastics_2020.html">2020</a>
      <a href="plastics_2019.html">2019</a>
      <a href="plastics_2018.html">2018</a>
      <a href="plastics_2017.html">2017</a>
      <a href="plastics_2016.html">2016</a>
    </div>
  </div>

</div>
<button id="updateButton">原料->產業</button>
</div>

</div>
  <div id="embedPageFrame" class="back">
    <a href="plastics_2020.html">Back</a>
</div>

  <div id="myDiv" style:width: 200%></div>
    <!-- Plotly chart will be drawn inside this DIV -->
  <div id="4import" class = "middle"></div>

  <div id="unit" class="unit">
    <a></a>
  </div>
</main>>

  <script>
    function embedDefaultPage() {
      document.getElementById("embedPageFrame");
    }

    function myFunction() {
      document.getElementById("myDropdown").classList.toggle("show");
    }

    /*可點擊新增的第二個選單*/
     function myFunction2() {
      document.getElementById("myDropdown2").classList.toggle("show");
    }

    // Close the dropdown menu if the user clicks outside of it
    window.onclick = function (event) {
      if (!event.target.matches(".dropbtn")) {
        var dropdowns = document.getElementsByClassName("dropdown-content");
        var i;
        for (i = 0; i < dropdowns.length; i++) {
          var openDropdown = dropdowns[i];
          if (openDropdown.classList.contains("show")) {
            openDropdown.classList.remove("show");
          }
        }
      }
    };

    var nodeLabels = [
      "石化原料進口 (999.0)", //0
      "基本原料進口 (341.2)",
      "塑膠原料進口 (136.5)",
      "單體原料進口 (54.8)", //3
      "塑膠製品進口 (54.0)",
      "產業用料進口 (28.6)",
      "進口 (1614.1)", //6
      "國內產業 (1795.2)",
      "出口 (1441.4)",
      "國內使用 (353.8)",//9
      "塑膠原料出口 (862.2)",
      "基本原料出口 (202.2)",
      "單體原料出口 (226.4)",
      "塑膠製品出口 (146.3)",
      "產業用料出口 (4.4)",
      "廢棄物 (198.3)",
      "國內存量 (155.4)",
      "能源回收 (110.9)",
      "掩埋 (2.2)",
      "回收再利用 (85.3)", //19
      "其他原料 (95.9)"
    ];

    var nodeValues = [
      9989910, 3411504, 1365184, 548494, 540263, 286107, 16141462, 
      17952734, 14414910, 3537824, 8621565, 2021870, 2264211, 1463691, 43573,
      1983379, 1554445, 1109071, 21554, 852754, 958517
    ]

    var nodeCustomData = [];
    for (var i = 0; i < nodeLabels.length; i++) {
      var label = nodeLabels[i];
      var value = nodeValues[i];
      var customDataStr ="數量: " + value + "";
      nodeCustomData.push(customDataStr);
    }

    var data = [
      {
        type: "sankey",
        arrangement: "fixed",
        domain: {
          x: [0, 1],
          y: [0, 1],
        },
        node: {
          label: nodeLabels,
          color: [// node顏色
            "blue",
            "blue",
            "blue",
            "blue",
            "blue",
            "blue",
            "459645", //
            "454F96",
            "2A7104",
            "2A7104",
            "blue",
            "blue",
            "blue",
            "blue",
            "blue",
            "blue",
            "blue",
            "blue",
            "blue",
            "blue",
            "blue"
          ],
          x: [0.01, 0.01, 0.01, 0.01, 0.01, 0.01, 0.25, 0.40, 0.57, 0.57, 0.99, 0.99, 0.99, 0.99, 0.99, 0.7, 0.99, 0.99, 0.99, 0.99, 0.01 ],
          y: [0.2, 0.35, 0.45, 0.55, 0.65, 0.75, 0.6, 0.65, 0.5, 0.75, 0.05, 0.16, 0.25, 0.35, 0.45, 0.82, 0.55, 0.65, 0.75, 0.85, 0.85 ],
          pad: 25,//數值越小越大
          customdata: nodeCustomData, // 新增 customdata 屬性，放入整合後的名稱和數量陣列
          hovertemplate: "<extra>%{label}<br>%{customdata}</extra>",

        },
        link: {
          arrow: 15,//無功能
          source: [0, 1, 2, 3, 4, 5, 6, 7, 7, 8, 8, 8, 8, 8, 9, 9, 15, 15, 15, 19, 20],
          target: [6, 6, 6, 6, 6, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 7, 7],
          value: [
            9989910, 3411504, 1365184, 548494, 540263, 286107, 16141462, 
            14414910, 3537824, 8621565, 2021870, 2264211, 1463691, 43573,
            1983379, 1554445, 1109071, 21554, 852754, 852754, 958517  
          ],
          color: [//flow 顏色
            "F0ECEA",
            "F0ECEA",
            "F0ECEA",
            "F0ECEA",
            "F0ECEA",
            "F0ECEA",
            "F0ECEA",
            "F0ECEA",
            "F0ECEA",
            "F0ECEA",
            "F0ECEA",
            "F0ECEA",
            "F0ECEA",
            "F0ECEA",
            "F0ECEA",
            "F0ECEA",
            "F0ECEA",
            "F0ECEA",
            "F0ECEA",
            "FFA8A8",
            "F0ECEA"
          ],
        },
      },
    ];


    var layout = {
      title: "2020 塑膠物質流",
      font: {
        size: 18,
      },
      height: 600, //圖面大小

      //在圖片旁邊添加文字標註
      annotations: [
        {
          x: 1.5, // x 座標，請根據您的需要調整位置
          y: 0.5, // y 座標，請根據您的需要調整位置
          xref: 'paper',
          yref: 'paper',
          xanchor: "left",
          yanchor: "middle",
          text: '單位：萬公噸', // 您要標註的文字內容
          showarrow: false,
        },
      ],
    };

    //this is to be copy   

    var nodeLabels2 = [
        "塑膠原料 (572.6)", //0
        "聚氯乙烯 (51.7)",
        "聚乙烯 (116.0)",
        "聚丙烯 (66.1)",
        "聚苯乙烯 (17.1)",
        "ＡＢＳ樹脂 (18.2)",
        "聚胺基甲酸酯樹脂 (11.9)", //6
        "不飽和聚酯樹脂 (2.4)",
        "酚甲醛樹脂 (3.7)",
        "環氧樹脂 (17.0)",
        "聚酯粒 (197.2)",
        "其他合成樹脂 (44.3)",
        "聚醯胺 (28.5)", //12
        "塑膠製品 (278.1)",//13
        "2-塑膠原料 (97.7)", 
        "合成纖維原料 (56.5)",
        "人造纖維紡紗及織布 (20.1)", 
        "其他電子零組件 (16.7)", 
        "未分類其他製品 (7.9)",
        "塗料、染料及顏料 (7.2)", 
        "育樂用品 (6.9)", //20
        "電線及配線器材 (6.1)", 
        "光電材料及元件 (6.0)",
        "其他紡織品 (5.7)",
        "印刷電路板 (5.4)", //24
        "未分類其他化學製品 (4.6)",
        "其他紙製品 (4.1)",         
        "不織布 (3.9)", //27
    ];

    var nodeValues2 = [
      5725754, 517031, 1160499, 661141, 170585, 182159, 111943, 24355, 37325, 160965, 1972202, 442513, 285036,
      2781499.549, 976966.3617, 564554.1087, 200813.1609, 166739.8579, 79378.44317, 71512.72238, 68797.60104, 61122.49826,
      60399.03789, 71512.72238, 54139.39255, 45847.47425, 41359.98868, 39271.94438
    ]
    var data2 = [
      {
        type: "sankey",
        arrangement: "fixed",
        domain: {
          x: [0, 1],
          y: [0, 1],
        },
        node: {
          label: nodeLabels2,
          color: [// node顏色
            "blue",
            "blue",
            "blue",
            "blue",
            "blue",
            "blue",
            "459645", //
            "454F96",
            "2A7104",
            "2A7104",
            "blue",
            "blue",
            "blue",
            "blue",
            "blue",
            "blue",
            "blue",
            "blue",
            "blue",
            "blue",
          ],
          pad: 35,//數值越小越大
          customdata: nodeCustomData, // 新增 customdata 屬性，放入整合後的名稱和數量陣列
          hovertemplate: "<extra>%{label}<br>%{customdata}</extra>",

        },
        link: {
          arrow: 15,//無功能
          source: [
           0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
           1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12,
           1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12,
           1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12,
           1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12,
           1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12,
           1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12,
           1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12,
           1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12,
           1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12,
           1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12,
           1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12,
           1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12,
           1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12,
           1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12,
           1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12
          ],
          target: [
          1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12,
          13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13,
          14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14,
          15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15,
          16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16,
          17, 17, 17, 17, 17, 17, 17, 17, 17, 17, 17, 17,
          18, 18, 18, 18, 18, 18, 18, 18, 18, 18, 18, 18,
          19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19,
          20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20,
          21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21,
          22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22,
          23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23,
          24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24,
          25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25,
          26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26,
          27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27

          ],
          value: [
          517031, 1160499, 661141, 170585, 182159, 111943, 24355, 37325, 160965, 1972202, 442513, 285036,
          309375.9863, 971418.1236, 482677.9001, 132943.259, 74470.02974, 51391.33956, 8601.912387, 1715.525028, 8427.998093,
          620173.9865, 105002.8696, 15300.61907, 10809.32804, 1727.902989, 23515.00115, 11325.907, 43996.28969, 20610.63973, 
          1833.704174, 11144.76851, 21077.71078, 762793.9043, 68131.20534, 0, 0, 0, 443.5636844, 0, 0, 0, 0, 0, 0, 502773.3384,
          31765.72496, 29571.48166, 32.76136794, 0, 3722.051115, 0, 0, 0, 0, 65.27270647, 0, 10596.83467, 2926.460038, 183469.781,
          132216.676, 0, 762.0400697, 208.7303988, 5589.597213, 0, 0, 0, 22697.29261, 0, 5265.521637, 0, 20094.89023, 4344.329194,
          10961.10301, 30.23520418, 8787.784617, 6825.984298, 6706.706836, 149.5384196, 0, 8668.914704, 8648.232875, 4160.72378,
          546.0119248, 2724.857652, 2377.348614, 3494.663688, 2011.150986, 3097.165484, 0, 236.1794316, 36047.42584, 0,
          20977.91875, 0, 3670.482787, 4216.063326, 19546.17294, 12907.51628, 2924.334273, 1921.478209, 2594.349387, 0, 
          13.00556124, 10065.57558, 5620.774561, 5317.848145, 13054.25161, 41349.07082, 0, 0, 872.6649601, 0, 0, 260.8616766, 0,
          2908.163911, 2510.366188, 167.1190944, 0, 0, 0, 0, 10987.33182, 0, 0, 0, 0, 0, 49411.70607, 0, 546.0119248, 2724.857652,
          2377.348614, 3494.663688, 2011.150986, 3097.165484, 0, 236.1794316, 36047.42584, 0, 20977.91875, 0, 0, 0, 9347.691521,
          0, 0 , 0, 0, 1766.45995, 41711.25264, 0, 1313.98844, 0, 301.7434321, 1083.377139, 142.6409168, 0, 11.97113682, 
          1734.412671, 124.735084, 2812.682322, 15950.68313, 0, 23685.22842, 0, 0, 30307.55417, 3484.441994, 243.0245079, 0, 0, 0,
          0, 0, 0, 7324.968012, 0, 0, 5867.323782, 13287.94159, 38.03239434, 0, 0, 0, 56.43061756, 48.97460457, 11481.17328, 
          1247.363942, 7244.704173
          ],
          color: [//flow 顏色
            "F0ECEA","F0ECEA","F0ECEA","F0ECEA","F0ECEA","F0ECEA","F0ECEA","F0ECEA","F0ECEA","F0ECEA","F0ECEA","F0ECEA",
            "F0ECEA","F0ECEA","F0ECEA","F0ECEA","F0ECEA","F0ECEA","F0ECEA","F0ECEA","F0ECEA","F0ECEA","F0ECEA","F0ECEA",
            "F0ECEA","F0ECEA","F0ECEA","F0ECEA","F0ECEA","F0ECEA","F0ECEA","F0ECEA","F0ECEA","F0ECEA","F0ECEA","F0ECEA",
            "F0ECEA","F0ECEA","F0ECEA","F0ECEA","F0ECEA","F0ECEA","F0ECEA","F0ECEA","F0ECEA","F0ECEA","F0ECEA","F0ECEA",
            "F0ECEA","F0ECEA","F0ECEA","F0ECEA","F0ECEA","F0ECEA","F0ECEA","F0ECEA","F0ECEA","F0ECEA","F0ECEA","F0ECEA",
            "F0ECEA","F0ECEA","F0ECEA","F0ECEA","F0ECEA","F0ECEA","F0ECEA","F0ECEA","F0ECEA","F0ECEA","F0ECEA","F0ECEA",
            "F0ECEA","F0ECEA","F0ECEA","F0ECEA","F0ECEA","F0ECEA","F0ECEA","F0ECEA","F0ECEA","F0ECEA","F0ECEA","F0ECEA",
            "F0ECEA","F0ECEA","F0ECEA","F0ECEA","F0ECEA","F0ECEA","F0ECEA","F0ECEA","F0ECEA","F0ECEA","F0ECEA","F0ECEA",
            "F0ECEA","F0ECEA","F0ECEA","F0ECEA","F0ECEA","F0ECEA","F0ECEA","F0ECEA","F0ECEA","F0ECEA","F0ECEA","F0ECEA",
            "F0ECEA","F0ECEA","F0ECEA","F0ECEA","F0ECEA","F0ECEA","F0ECEA","F0ECEA","F0ECEA","F0ECEA","F0ECEA","F0ECEA",
            "F0ECEA","F0ECEA","F0ECEA","F0ECEA","F0ECEA","F0ECEA","F0ECEA","F0ECEA","F0ECEA","F0ECEA","F0ECEA","F0ECEA",
            "F0ECEA","F0ECEA","F0ECEA","F0ECEA","F0ECEA","F0ECEA","F0ECEA","F0ECEA","F0ECEA","F0ECEA","F0ECEA","F0ECEA",
            "F0ECEA","F0ECEA","F0ECEA","F0ECEA","F0ECEA","F0ECEA","F0ECEA","F0ECEA","F0ECEA","F0ECEA","F0ECEA","F0ECEA",
            "F0ECEA","F0ECEA","F0ECEA","F0ECEA","F0ECEA","F0ECEA","F0ECEA","F0ECEA","F0ECEA","F0ECEA","F0ECEA","F0ECEA",
            "F0ECEA","F0ECEA","F0ECEA","F0ECEA","F0ECEA","F0ECEA","F0ECEA","F0ECEA","F0ECEA","F0ECEA","F0ECEA","F0ECEA",
            "F0ECEA","F0ECEA","F0ECEA","F0ECEA","F0ECEA","F0ECEA","F0ECEA","F0ECEA","F0ECEA","F0ECEA","F0ECEA","F0ECEA",
            "F0ECEA","F0ECEA","F0ECEA","F0ECEA","F0ECEA","F0ECEA","F0ECEA","F0ECEA","F0ECEA","F0ECEA","F0ECEA","F0ECEA",
            "F0ECEA","F0ECEA","F0ECEA","F0ECEA","F0ECEA","F0ECEA","F0ECEA","F0ECEA","F0ECEA","F0ECEA","F0ECEA","F0ECEA",
            "F0ECEA","F0ECEA","F0ECEA","F0ECEA","F0ECEA","F0ECEA","F0ECEA","F0ECEA","F0ECEA","F0ECEA","F0ECEA","F0ECEA",
            "FFA8A8","F0ECEA","F0ECEA","F0ECEA","F0ECEA","F0ECEA","F0ECEA","F0ECEA","F0ECEA","F0ECEA","F0ECEA","F0ECEA"
          ],
        },
      },
    ];


    var layout2 = {
      title: "2020 塑膠原料流向",
      font: {
        size: 20,
      },
    };

    var datapie2 = [
      {
        values: [45.7, 19.5, 11.0, 3.5, 2.7, 1.4, 1.3, 1.2, 1.0, 1.0, 1.0 ,0.9, 0.8, 0.7, 0.7, 7.6],
        labels: [
        "塑膠製品","2-塑膠原料", "合成纖維原料","人造纖維紡紗及織布", "其他電子零組件", "未分類其他製品",
        "塗料、染料及顏料", "育樂用品", "其他紡織品", "電線及配線器材", "印刷電路板", "光電材料及元件", "未分類其他化學製品",
        "其他紙製品", "不織布", "其他"
        ],
        type: "pie",
      },
    ];
    var layoutpie2 = {
      title: "塑膠原料流向比例",
      font: {
        size: 20,
      },
      margin: {
        t: 50, // 上邊距
        r: 100, // 右邊距
        b: -50, // 下邊距
        l: 300, // 左邊距
      },
    };

    /*var trace2 = {
      x: [2012, 2013, 2014, 2015, 2016, 2017, 2018, 2019, 2020, 2021],
      y: [
        241556616, 250640208, 255546601, 253169026, 254087544, 255291925,
        255546601, 245315669, 231061014, 248591834,
      ],
      type: "scatter",
    };
    var data2 = [trace2];
    var layout2 = {
      title: "歷年進口趨勢圖",
      font: {
        size: 25,
      },
    };*/


    Plotly.newPlot("myDiv", data, layout); //這條不能刪

    // 獲取按鈕元素
    var updateButton = document.getElementById("updateButton");
    // 添加按鈕點擊事件
    updateButton.addEventListener("click", function() {
      alert("查看國內塑膠原料流向"); // 这里可以添加任何你想要执行的操作
      Plotly.newPlot("myDiv", data2, layout2); // 更新图表
        //Plotly.newPlot("4import", data2pie, layout2pie);
    });

  </script>
      <footer>
        <div>
            <p>工業技術研究院 永續環境技術組 綠色材料與分析研究室</p>
            <p>台南市歸仁區高發二路360號B棟316室 | 電話：06-363-6674</p>
            <p></p>
        </div>
    </footer>
</body>
